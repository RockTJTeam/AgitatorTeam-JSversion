@using Agitator.Business.Models.Home;
@model LoginModel
@{

    Layout = null;

}
<!DOCTYPE html>
<html>
<head>
    <title>系统登录</title>
    @Scripts.Render("~/bundles/jquery")
    @*@Styles.Render("~/Content/css")*@
    @Styles.Render("~/Content/themes/gray/css")    
    @Styles.Render("~/Content/themes/easyui/custom")
    <style type="text/css">
        body {
            /*letter-spacing: 1px;*/
            color: #444;
        }

        #LoginTb {
            font-size: 14px;
        }

        #LoginTb {
            font-size: 12px;
        }

            #LoginTb input {
                width: 190px;
                height: 24px;
                line-height: 24px;
            }
    </style>
    <script type="text/javascript">
        $(function () {
            $("#LoginSys").click(function () {
                LoginSys();
            });
            $("#UserName").keydown(function (e) {
                var curkey = e.which;
                if (curkey == 13) {
                    LoginSys();
                    return false;
                }
            });
            $("#Password").keydown(function (e) {
                var curkey = e.which;
                if (curkey == 13) {
                    LoginSys();
                    return false;
                }
            });
            $("#ValidateCode").keydown(function (e) {
                var curkey = e.which;
                if (curkey == 13) {
                    LoginSys();
                    return false;
                }
            });



        });

        function LoginSys() {
            $("#mes").html("");
            $("#UserName").removeClass("input-validation-error");
            $("#Password").removeClass("input-validation-error");
            $("#ValidateCode").removeClass("input-validation-error");
            if ($.trim($("#UserName").val()) == "") {
                $("#UserName").addClass("input-validation-error").focus();
                $("#mes").html("用户名不能为空！");
                return;
            }
            if ($.trim($("#Password").val()) == "") {
                $("#Password").addClass("input-validation-error").focus();
                $("#mes").html("密码不能为空！");
                return;
            }
            //if ($.trim($("#ValidateCode").val()) == "") {
            //    $("#ValidateCode").addClass("input-validation-error").focus();
            //    $("#mes").html("验证码不能为空！");
            //    return;
            //}
            $("#Loading").show();
            //$("#loginForm").submit();

            //DEBUG代码
            var par = {
                userName: 'admin1',
                password:'123'
            };
            $.ajax({
                url: 'http://115.28.71.69:8080/zjyhj/user/auth',
                data: JSON.stringify(par),
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                dataType: 'jsonp',
                jsonp: "jsoncallback",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("client_type","DESKTOP_WEB")
                },
                success: function (data) {
                    alert(JSON.stringify(json));
                }, error: function (x, n, r) {
                    alert(r);
                }
            });
            //$.getJSON('http://115.28.71.69:8080/zjyhj/user/auth?userName=admin1&password:123&jsoncallback=?', function (json) {
            //    alert(JSON.stringify(json));
            //});
            //end DEBUG代码

            return false;
        }

    </script>
</head>
<body>
    <div data-options="region:'north',border:false,split:false" style="height: 78px;background-image:url('@Url.Content("/images/top_bg.png")');background-repeat:repeat;">
        <div style="float:left;background-image:url('@Url.Content("/images/logo.png")');height:78px;width:100%;background-repeat:no-repeat;" id="DIVLogo">
        </div>
        <div class="define-head">
            <div class="define-logo">
                <div id="LoginTopLine"></div>
            </div>
            <div class="define-account">
            </div>
        </div>
    </div>
    <div style="margin: 0 auto; margin-top: 100px; width: 800px;">
        <table style="width: 800px; margin: 0 auto;">
            <tr>
                <td><img src="/Content/Images/account.jpg"></td>
                <td style="width: 310px;">
                    @using (Html.BeginForm("Login", "Home", FormMethod.Post, new { id = "loginForm" }))
                    {
                        <table id="LoginTb" style="margin-top: 10px; background: #fff; width: 100%; height: 230px; border: 1px #ccc solid;">
                            <tr>
                                <td colspan="2" style="font-size: 18px;  font-weight: bold; padding: 5px 20px;">
                                    欢迎登录
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 80px; text-align: right">
                                    用户名：
                                </td>
                                <td>
                                    @Html.TextBoxFor(d => d.UserName, new { @class = "easyui-textbox" })
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 80px; text-align: right;">
                                    密 码：
                                </td>
                                <td>
                                    @Html.TextBoxFor(d => d.Password, new { @class = "easyui-textbox", type = "password" })
                                </td>
                            </tr>
                            @*<tr>
                                    <td style="width: 80px; text-align: right">
                                        验证码：
                                    </td>
                                    <td></td>
                                </tr>*@

                            <tr>
                                <td colspan="2">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td style="width:40px;">&nbsp;</td>
                                            <td>
                                                <div id="mes" class="field-validation-error">
                                                    @{
                        if (Model != null)
                        {
                            <span>
                                @Model.errorMessage
                            </span>
                        }
                                                    }
                                                </div>
                                                <div id="Loading" style="display: none" class='panel-loading'><font color='#000'>加载中...</font></div>
                                            </td>
                                            <td style="width: 100px;">
                                                <a id="LoginSys" href="javascript:void(0)" class="easyui-linkbutton l-btn easyui-linkbutton-cstype">
                                                <span class="l-btn-left">
                                                    <span class="l-btn-text">登录</span></span></a>
                                            </td>
                                        </tr>

                                    </table>

                                </td>
                            </tr>

                        </table>
                    }

                </td>
            </tr>
        </table>

    </div>
    <div data-options="region:'south',border:false" style="height: 20px;">
        <div style="height:20px; width:100%;color:#c9d4f6; text-align:center; line-height:20px;border-top:1px #ccc solid;bottom:0; position:absolute;background-image:url('@Url.Content("/images/top_bg.png")');background-repeat:repeat-x;">
            Copyright 2008-2016
        </div>
    </div>
</body>
</html>